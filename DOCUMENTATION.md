# 2D ë©”ì‰¬ ì»¤íŒ… ì‹œìŠ¤í…œ ì™„ì „ ë¬¸ì„œí™”

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì „ì²´ íŒŒì´í”„ë¼ì¸](#ì „ì²´-íŒŒì´í”„ë¼ì¸)
3. [í•µì‹¬ ì»´í¬ë„ŒíŠ¸](#í•µì‹¬-ì»´í¬ë„ŒíŠ¸)
4. [ë©”ì‰¬ ì ˆë‹¨ ì•Œê³ ë¦¬ì¦˜](#ë©”ì‰¬-ì ˆë‹¨-ì•Œê³ ë¦¬ì¦˜)
5. [ì˜ˆì™¸ ì²˜ë¦¬](#ì˜ˆì™¸-ì²˜ë¦¬)
6. [ì¢Œí‘œê³„ ë³€í™˜](#ì¢Œí‘œê³„-ë³€í™˜)
7. [ë¬¸ì œì ê³¼ í•´ê²°ì±…](#ë¬¸ì œì ê³¼-í•´ê²°ì±…)

---

## ì‹œìŠ¤í…œ ê°œìš”

### ê¸°ìˆ  ìŠ¤íƒ
- **ë Œë”ë§**: Three.js (OrthographicCamera - ì™„ë²½í•œ 2D)
- **ë¬¼ë¦¬ ì—”ì§„**: Matter.js (2D ì „ìš©)
- **ë©”ì‰¬ ìƒì„±**: ShapeGeometry
- **ì ˆë‹¨ ë°©ì‹**: 2D í‰ë©´ ê¸°ë°˜ ì„ ë¶„ êµì°¨ ì•Œê³ ë¦¬ì¦˜

### ì„¤ê³„ ì² í•™
```
í•µì‹¬: 2D ë©”ì‰¬ë¥¼ ì„ ë¶„ìœ¼ë¡œ ì ˆë‹¨í•˜ì—¬ 2ê°œì˜ ë…ë¦½ëœ ë©”ì‰¬ë¡œ ë¶„ë¦¬
ë¬¼ë¦¬: Matter.jsë¡œ ìì—°ìŠ¤ëŸ¬ìš´ 2D ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜
ì‹œê°: Three.jsë¡œ ê³ í’ˆì§ˆ ë Œë”ë§
```

---

## ì „ì²´ íŒŒì´í”„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì´ˆê¸°í™” (init)                                         â”‚
â”‚    - Three.js Scene ìƒì„±                                 â”‚
â”‚    - OrthographicCamera ì„¤ì • (2D ë·°)                    â”‚
â”‚    - Matter.js World ìƒì„±                                â”‚
â”‚    - ê²½ê³„ ë²½ ìƒì„± (4ë©´)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ë„í˜• ë¡œë“œ (loadSelectedShape)                        â”‚
â”‚    - ì„ íƒëœ ë„í˜•ì˜ Shape ìƒì„±                            â”‚
â”‚    - createMeshFromShape í˜¸ì¶œ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ë©”ì‰¬ ìƒì„± (createMeshFromShape)                       â”‚
â”‚    â”œâ”€ Three.js ShapeGeometry ìƒì„±                       â”‚
â”‚    â”œâ”€ ì •ì  ê°„ì†Œí™” (simplifyVertices)                    â”‚
â”‚    â”œâ”€ Matter.js Body ìƒì„± (fromVertices)                â”‚
â”‚    â””â”€ meshes ë°°ì—´ì— ì¶”ê°€                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜ (animate)                             â”‚
â”‚    - Matter.Engine.update (60 FPS)                       â”‚
â”‚    - Three.js ë©”ì‰¬ ìœ„ì¹˜ ë™ê¸°í™” (Yì¶• ë°˜ì „)               â”‚
â”‚    - ë Œë”ë§                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. ì‚¬ìš©ì ì…ë ¥ (ë§ˆìš°ìŠ¤ ë“œë˜ê·¸)                           â”‚
â”‚    â”œâ”€ onMouseDown: ì‹œì‘ì  ì„¤ì •                          â”‚
â”‚    â”œâ”€ onMouseMove: ì ˆë‹¨ì„  ì‹œê°í™”                        â”‚
â”‚    â””â”€ onMouseUp: performCut í˜¸ì¶œ                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. ë©”ì‰¬ ì ˆë‹¨ (performCut)                                â”‚
â”‚    â”œâ”€ ì ˆë‹¨ í‰ë©´ ìƒì„± (normal ê³„ì‚°)                      â”‚
â”‚    â”œâ”€ ê° ë©”ì‰¬ í™•ì¸ (ì ˆë‹¨ ê°€ëŠ¥ ì—¬ë¶€)                     â”‚
â”‚    â””â”€ splitMeshSimple2D í˜¸ì¶œ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. ë©”ì‰¬ ë¶„í•  (splitMeshSimple2D)                         â”‚
â”‚    â”œâ”€ ì •ì  ë¶„ë¥˜ (ì–‘ìˆ˜/ìŒìˆ˜)                             â”‚
â”‚    â”œâ”€ êµì°¨ì  ê³„ì‚° (ì„ ë¶„-ì ˆë‹¨ì„  êµì°¨)                    â”‚
â”‚    â”œâ”€ createShapeFromVertices2D (2ê°œ Shape ìƒì„±)        â”‚
â”‚    â”œâ”€ createMeshFromShape (2ê°œ Mesh ìƒì„±)               â”‚
â”‚    â””â”€ applyCutForce (ë¬¼ë¦¬ í˜ ì ìš©)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 1. ì´ˆê¸°í™” ì‹œìŠ¤í…œ

#### setupPhysics()
**ëª©ì **: Matter.js 2D ë¬¼ë¦¬ ì—”ì§„ ì´ˆê¸°í™”

**êµ¬í˜„ ë°©ì‹**:
```javascript
world.gravity.y = 1;  // Yì¶• ì•„ë˜ê°€ ì–‘ìˆ˜ (Matter.js ì¢Œí‘œê³„)
```

**ì„¤ê³„ ì˜ë„**:
- 2D ì „ìš© ë¬¼ë¦¬ ì—”ì§„ ì‚¬ìš©ìœ¼ë¡œ Zì¶• íšŒì „ ë¬¸ì œ í•´ê²°
- Cannon.js(3D)ì—ì„œ ë°œìƒí•˜ë˜ ì–´ìƒ‰í•œ 3D íšŒì „ ì œê±°

**ì˜ˆì™¸ ì²˜ë¦¬**:
- ì¶©ëŒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¡œ ë²½ ì¶©ëŒ ê°ì§€ ë° ë¡œê¹…
- ë¬¼ë¦¬ ì—”ì§„ ì´ˆê¸°í™” ì‹¤íŒ¨ ì‹œ ì½˜ì†” ì—ëŸ¬ ì¶œë ¥

---

#### createBoundaryWalls()
**ëª©ì **: ìº”ë²„ìŠ¤ ê²½ê³„ì— 4ë©´ ë²½ ìƒì„± (ë„í˜•ì´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šë„ë¡)

**êµ¬í˜„ ë°©ì‹**:
```javascript
// OrthographicCamera ë²”ìœ„ ê³„ì‚°
const halfWidth = (frustumSize * aspect) / 2;
const halfHeight = frustumSize / 2;

// 4ë©´ ë²½: top, bottom, left, right
// ì‹œê°(Three.js) = ë¬¼ë¦¬(Matter.js) ë™ì¼ ìœ„ì¹˜
```

**ì„¤ê³„ ì˜ë„**:
- ë„í˜•ì´ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ë¬¸ì œ í•´ê²°
- ì‹œê°ì  ë²½ê³¼ ë¬¼ë¦¬ì  ë²½ì„ ë™ì¼ ìœ„ì¹˜ì— ë°°ì¹˜ (ë§ˆì§„ ì œê±°)

**ì˜ˆì™¸ ì²˜ë¦¬**:
- ì¤Œ/ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ìë™ ë²½ ì¬ìƒì„± (updateBoundaryWalls)
- ê¸°ì¡´ ë²½ ë©”ëª¨ë¦¬ í•´ì œ (geometry.dispose, material.dispose)

---

### 2. ë©”ì‰¬ ìƒì„± ì‹œìŠ¤í…œ

#### createMeshFromShape()
**ëª©ì **: Shapeë¡œë¶€í„° Three.js ë©”ì‰¬ì™€ Matter.js ë¬¼ë¦¬ ë°”ë””ë¥¼ ë™ì‹œ ìƒì„±

**êµ¬í˜„ ë°©ì‹**:
```javascript
1. THREE.ShapeGeometry(shape) ìƒì„±
2. ì •ì  ì¶”ì¶œ ë° ê°„ì†Œí™” (simplifyVertices)
3. Matter.Bodies.fromVertices ìƒì„±
4. ìœ„ì¹˜ ë³´ì • (Matter.js ë²„ê·¸ ë°©ì§€)
5. meshes ë°°ì—´ì— ì €ì¥
```

**ì„¤ê³„ ì˜ë„**:
- ì‹œê°ê³¼ ë¬¼ë¦¬ë¥¼ ì™„ì „íˆ ë™ê¸°í™”
- ë³µì¡í•œ ë„í˜•ë„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬

**ì˜ˆì™¸ ì²˜ë¦¬**:
```javascript
try {
    body = Matter.Bodies.fromVertices(...);
} catch (e) {
    // BoundingBoxë¡œ í´ë°±
    body = Matter.Bodies.rectangle(...);
}
```

---

#### simplifyVertices()
**ëª©ì **: ë³µì¡í•œ ë„í˜•ì˜ ì •ì ì„ ì ì ˆíˆ ê°„ì†Œí™”í•˜ì—¬ Matter.js ì•ˆì •ì„± í–¥ìƒ

**êµ¬í˜„ ë°©ì‹**:
```javascript
if (vertices.length <= 8) {
    return vertices;  // ë‹¨ìˆœ ë„í˜•ì€ ê·¸ëŒ€ë¡œ
}

// ë³µì¡í•œ ë„í˜•ë§Œ ê°„ì†Œí™”
const targetPoints = Math.min(30, Math.max(12, vertices.length / 3));
```

**ì„¤ê³„ ì˜ë„**:
- **ì ì‘í˜• ê°„ì†Œí™”**: ë„í˜• ë³µì¡ë„ì— ë”°ë¼ ìë™ ì¡°ì •
- ë‹¨ìˆœ ë„í˜•(ì‚¬ê°í˜•, ì‚¼ê°í˜•) ë³´ì¡´
- ë³µì¡í•œ ë„í˜•(ì›, ë‚˜ë­‡ì)ë§Œ ê°„ì†Œí™”

**ì •ì  ê°œìˆ˜ë³„ ì²˜ë¦¬**:
| ì •ì  ìˆ˜ | ì²˜ë¦¬ ë°©ì‹ | ì´ìœ  |
|---------|-----------|------|
| â‰¤ 8ê°œ | ê·¸ëŒ€ë¡œ ìœ ì§€ | ë‹¨ìˆœ ë„í˜• (ì‚¬ê°í˜•, ì˜¤ê°í˜• ë“±) |
| 9~30ê°œ | ê·¸ëŒ€ë¡œ ìœ ì§€ | ì´ë¯¸ ì ì ˆí•œ ìˆ˜ì¤€ |
| > 30ê°œ | ê°„ì†Œí™” (12~30ê°œ) | Matter.js ì•ˆì •ì„± |

**ì˜ˆì™¸ ì²˜ë¦¬**:
- ì¤‘ë³µ ì •ì  ìë™ ì œê±° (ê±°ë¦¬ 0.5px ì´ë‚´)
- ìµœì†Œ 3ê°œ ì •ì  ë³´ì¥

---

### 3. ì¢Œí‘œê³„ ë³€í™˜ ì‹œìŠ¤í…œ

#### ë¬¸ì œì˜ í•µì‹¬
```
Three.js:  Yì¶• ìœ„ê°€ ì–‘ìˆ˜ (+Y = ìœ„)
Matter.js: Yì¶• ì•„ë˜ê°€ ì–‘ìˆ˜ (+Y = ì•„ë˜)
â†’ Yì¶•ì´ ë°˜ëŒ€!
```

#### ë³€í™˜ ê·œì¹™
```javascript
// Three.js â†’ Matter.js
matterY = -threeY

// Matter.js â†’ Three.js (ë™ê¸°í™”)
threeY = -matterY
```

#### ì ìš© ìœ„ì¹˜
1. **ë©”ì‰¬ ìƒì„± ì‹œ**:
```javascript
const matterY = -position.y;
Matter.Bodies.fromVertices(x, matterY, ...);
```

2. **ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„**:
```javascript
mesh.position.y = -body.position.y;  // Yì¶• ë°˜ì „!
```

3. **ë²½ ìƒì„± ì‹œ**:
```javascript
wallMesh.position.y = -config.y;  // Three.js ìœ„ì¹˜
wallBody.position.y = config.y;   // Matter.js ìœ„ì¹˜
```

---

## ë©”ì‰¬ ì ˆë‹¨ ì•Œê³ ë¦¬ì¦˜

### performCut(start, end)
**ëª©ì **: ì„ ë¶„ì„ ê¸°ì¤€ìœ¼ë¡œ ë©”ì‰¬ë¥¼ ì ˆë‹¨í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸

**ì•Œê³ ë¦¬ì¦˜**:
```javascript
1. ì ˆë‹¨ì„  ë°©í–¥ ë²¡í„° ê³„ì‚°
   direction = normalize(end - start)

2. ë²•ì„  ë²¡í„° ê³„ì‚° (2D)
   normal = (-direction.y, direction.x)

3. ê° ë©”ì‰¬ì˜ ëª¨ë“  ì •ì  í™•ì¸
   distance = (vertex - start) Â· normal
   
4. ì–‘ìˆ˜/ìŒìˆ˜ ì •ì ì´ ëª¨ë‘ ì¡´ì¬í•˜ë©´ ì ˆë‹¨ ê°€ëŠ¥
   hasPositive && hasNegative â†’ ì ˆë‹¨!
```

**ì„¤ê³„ ì˜ë„**:
- 2D í‰ë©´ì—ì„œ ì •í™•í•œ ì ˆë‹¨ì„  ê³„ì‚°
- ì¹´ë©”ë¼ ê°ë„ì™€ ë¬´ê´€í•œ ì ˆëŒ€ì  2D ì¢Œí‘œ ì‚¬ìš©

**ì˜ˆì™¸ ì²˜ë¦¬**:
- ì ˆë‹¨ ë¶ˆê°€ëŠ¥í•œ ë©”ì‰¬ëŠ” ê±´ë„ˆëœ€
- ì›ë³¸ ë©”ì‰¬ëŠ” ì ˆë‹¨ ì„±ê³µ ì‹œì—ë§Œ ì œê±°

---

### splitMeshSimple2D()
**ëª©ì **: ì‹¤ì œë¡œ ë©”ì‰¬ë¥¼ 2ê°œë¡œ ë¶„í• í•˜ëŠ” í•µì‹¬ í•¨ìˆ˜

#### ë‹¨ê³„ 1: ì •ì  ë¶„ë¥˜
```javascript
for (ê° ì •ì ) {
    distance = (worldVertex - start) Â· normal
    
    if (distance >= 0) {
        posVertices.push(vertex)  // ì–‘ìˆ˜ ê·¸ë£¹
    } else {
        negVertices.push(vertex)  // ìŒìˆ˜ ê·¸ë£¹
    }
}
```

**ì„¤ê³„ ì˜ë„**: ì ˆë‹¨ì„ ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ì ì„ ì–‘ìª½ìœ¼ë¡œ ë¶„ë¦¬

---

#### ë‹¨ê³„ 2: êµì°¨ì  ê³„ì‚° (í•µì‹¬!)
```javascript
for (i = 0 to vertexCount) {
    nextIndex = (i + 1) % vertexCount  // ğŸ”¥ ìˆœí™˜ ì²˜ë¦¬!
    
    v1 = vertices[i]
    v2 = vertices[nextIndex]
    
    d1 = distance(v1 to cutLine)
    d2 = distance(v2 to cutLine)
    
    // ì„ ë¶„ì´ ì ˆë‹¨ì„ ì„ ê°€ë¡œì§€ë¥´ë©´
    if ((d1 > 0 && d2 < 0) || (d1 < 0 && d2 > 0)) {
        // ì •í™•í•œ êµì°¨ì  ê³„ì‚°
        t = |d1| / (|d1| + |d2|)
        intersection = lerp(v1, v2, t)
        
        // ì–‘ìª½ ê·¸ë£¹ì— ëª¨ë‘ ì¶”ê°€
        posVertices.push(intersection)
        negVertices.push(intersection)
    }
}
```

**ì„¤ê³„ ì˜ë„**:
- **ìˆœí™˜ ì²˜ë¦¬ (`% vertexCount`)**: ë‹«íŒ ë„í˜•ì˜ ë§ˆì§€ë§‰â†’ì²« ì •ì  ì—°ê²° ì²˜ë¦¬
- **ì–‘ìª½ ì¶”ê°€**: êµì°¨ì ì€ ë‘ ì¡°ê°ì˜ ê²½ê³„ì ì´ë¯€ë¡œ ë‘˜ ë‹¤ í¬í•¨

**ì´ì „ ë²„ê·¸**:
```javascript
// âŒ ì´ì „: ë§ˆì§€ë§‰ ì„ ë¶„ ëˆ„ë½
for (i = 0; i < count - 1; i++)

// âœ… í˜„ì¬: ëª¨ë“  ì„ ë¶„ ì²˜ë¦¬
for (i = 0; i < count; i++)
    nextIndex = (i + 1) % count
```

---

#### ë‹¨ê³„ 3: ì •ì  ê²€ì¦
```javascript
if (posVertices.length < 3 || negVertices.length < 3) {
    console.warn('âš ï¸ ë¶„í•  ì‹¤íŒ¨: ì •ì  ë¶€ì¡±');
    
    // ğŸ”¥ ì›ë˜ ë©”ì‰¬ ë³µêµ¬!
    scene.add(threeMesh);
    Matter.World.add(world, matterBody);
    meshes.push(meshData);
    return;
}
```

**ì„¤ê³„ ì˜ë„**:
- ë„í˜•ì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œ ë°©ì§€
- ìµœì†Œ 3ê°œ ì •ì  í•„ìš” (ì‚¼ê°í˜•)
- ì‹¤íŒ¨ ì‹œ ì›ë³¸ ìœ ì§€

---

#### ë‹¨ê³„ 4: Shape ì¬êµ¬ì„±
```javascript
createShapeFromVertices2D(vertices) {
    1. ì¤‘ì‹¬ì  ê³„ì‚°
    2. ê°ë„ë¡œ ì •ë ¬ (ì‹œê³„ë°©í–¥/ë°˜ì‹œê³„ë°©í–¥)
    3. ì¤‘ë³µ ì •ì  ì œê±° (0.01px ì„ê³„ê°’)
    4. THREE.Shape ìƒì„±
}
```

**ì„¤ê³„ ì˜ë„**:
- ì •ì  ìˆœì„œê°€ ì¤‘ìš”í•¨ (ì™¸ê³½ì„  ê·¸ë¦¬ê¸°)
- ê°ë„ ì •ë ¬ë¡œ ì˜¬ë°”ë¥¸ ë‹¤ê°í˜• ìƒì„±

**ì˜ˆì™¸ ì²˜ë¦¬**:
```javascript
// ì¤‘ë³µ ì •ì  ì œê±°
if (distance(current, vertex) > 0.01) {
    uniqueVertices.push(vertex)
}

// ìµœì†Œ ì •ì  ë³´ì¥
if (uniqueVertices.length < 3) {
    return null;
}
```

---

#### ë‹¨ê³„ 5: ë¬¼ë¦¬ íš¨ê³¼ ì ìš©
```javascript
// ì›ë˜ ë¬¼ë¦¬ ì†ì„± ìœ ì§€
const originalPhysics = {
    friction: body.friction,
    restitution: body.restitution,
    density: body.density,
    frictionAir: body.frictionAir
};

// ìƒˆ ë©”ì‰¬ ìƒì„± ì‹œ ë™ì¼í•œ ì†ì„± ì ìš©
createMeshFromShape(shape, pos, originalPhysics);

// ì ê¹ ëŒ€ê¸° í›„ ì ˆë‹¨ í˜ ì ìš© (ì•ˆì •í™”)
setTimeout(() => {
    applyCutForce(body, 'left');
}, 10);
```

**ì„¤ê³„ ì˜ë„**:
- ì˜ë¦° ì¡°ê°ë„ ì›ë˜ ë©”ì‰¬ì™€ ê°™ì€ ë¬¼ë¦¬ íŠ¹ì„±
- 10ms ëŒ€ê¸°ë¡œ ë¬¼ë¦¬ ë°”ë”” ì•ˆì •í™” í›„ í˜ ì ìš©

---

## ì˜ˆì™¸ ì²˜ë¦¬

### 1. ë©”ì‰¬ ìƒì„± ì‹¤íŒ¨
```javascript
try {
    body = Matter.Bodies.fromVertices(...);
} catch (e) {
    console.warn('fromVertices ì‹¤íŒ¨, BoundingBoxë¡œ ê·¼ì‚¬');
    body = Matter.Bodies.rectangle(...);
}
```

### 2. ì ˆë‹¨ ì‹¤íŒ¨ (ì •ì  ë¶€ì¡±)
```javascript
if (vertices.length < 3) {
    // ì›ë˜ ë©”ì‰¬ ë³µêµ¬
    scene.add(threeMesh);
    Matter.World.add(world, body);
    meshes.push(meshData);
    return;
}
```

### 3. Shape ìƒì„± ì‹¤íŒ¨
```javascript
const shape = createShapeFromVertices2D(vertices);
if (!shape || shape.curves.length === 0) {
    throw new Error('Shape ìƒì„± ì‹¤íŒ¨');
}
```

### 4. ë¬¼ë¦¬ ë°”ë”” ìƒì„± ì‹¤íŒ¨
```javascript
if (!mesh || !mesh.matterBody) {
    throw new Error('ë¬¼ë¦¬ ë°”ë”” ìƒì„± ì‹¤íŒ¨');
}
```

### 5. ë²½ ì—…ë°ì´íŠ¸ (ë¦¬ì‚¬ì´ì¦ˆ/ì¤Œ)
```javascript
function updateBoundaryWalls() {
    // ê¸°ì¡´ ë²½ ì œê±°
    walls.forEach(wall => {
        scene.remove(wall.mesh);
        Matter.World.remove(world, wall.body);
        wall.mesh.geometry.dispose();
        wall.mesh.material.dispose();
    });
    
    // ìƒˆë¡œìš´ ë²½ ìƒì„±
    createBoundaryWalls();
}
```

---

## ë¬¸ì œì ê³¼ í•´ê²°ì±…

### ë¬¸ì œ 1: ë„í˜•ì´ ìœ„ë¡œ ì¹˜ì†ŸìŒ âŒ
**ì›ì¸**: ì¤‘ë ¥ ë°©í–¥ ì˜¤ë¥˜ (Cannon.js 3D ì¢Œí‘œê³„ í˜¼ë€)

**í•´ê²°ì±…**: Matter.js 2D + ì˜¬ë°”ë¥¸ ì¢Œí‘œ ë³€í™˜
```javascript
// Matter.js: Yì¶• ì•„ë˜ê°€ ì–‘ìˆ˜
world.gravity.y = 1;
threeY = -matterY;  // ë™ê¸°í™” ì‹œ ë°˜ì „
```

---

### ë¬¸ì œ 2: ë„í˜•ì´ ë²½ì— ë¼ì„ âŒ
**ì›ì¸**: 
- ë³µì¡í•œ ì •ì  (100+)ìœ¼ë¡œ fromVertices ì‹¤íŒ¨
- ì¤‘ì‹¬ì  ê³„ì‚° ì˜¤ë¥˜

**í•´ê²°ì±…**: ì ì‘í˜• ì •ì  ê°„ì†Œí™”
```javascript
// ë‹¨ìˆœ ë„í˜•: ê·¸ëŒ€ë¡œ
// ë³µì¡í•œ ë„í˜•: 12~30ê°œë¡œ ê°„ì†Œí™”
simplifyVertices(vertices, 30)
```

---

### ë¬¸ì œ 3: ì‚¬ê°í˜• â†’ ì‚¼ê°í˜• 2ê°œ âŒ
**ì›ì¸**: 20ê°œ ê°•ì œ ê°„ì†Œí™”

**í•´ê²°ì±…**: 8ê°œ ì´í•˜ëŠ” ê°„ì†Œí™” ì•ˆ í•¨
```javascript
if (vertices.length <= 8) {
    return vertices;  // ë³´ì¡´!
}
```

---

### ë¬¸ì œ 4: ë„í˜•ì´ ë°–ìœ¼ë¡œ ë‚˜ê° âŒ
**ì›ì¸**: ë²½ì´ ì—†ìŒ

**í•´ê²°ì±…**: 4ë©´ ë²½ ì¶”ê°€ (ìë™ ë¦¬ì‚¬ì´ì¦ˆ)
```javascript
createBoundaryWalls()
onWindowResize â†’ updateBoundaryWalls()
```

---

### ë¬¸ì œ 5: ë„í˜•ì´ ì‚¬ë¼ì§ âŒ
**ì›ì¸**: 
- ë§ˆì§€ë§‰ ì„ ë¶„ ëˆ„ë½ â†’ êµì°¨ì  ë¶€ì¡±
- ì •ì  < 3ê°œ â†’ Shape ìƒì„± ì‹¤íŒ¨

**í•´ê²°ì±…**:
```javascript
// 1. ìˆœí™˜ ì²˜ë¦¬
nextIndex = (i + 1) % count

// 2. ì›ë³¸ ë³µêµ¬
if (vertices < 3) {
    scene.add(threeMesh);  // ë³µêµ¬!
    return;
}
```

---

## ë””ë²„ê¹… ê°€ì´ë“œ

### ì½˜ì†” ë¡œê·¸ í•´ì„

#### ì •ìƒ ì ˆë‹¨
```
ğŸ”ª 2D ì ˆë‹¨ ì‹œì‘
âœ… 2D ë©”ì‰¬ ì ˆë‹¨ ê°€ëŠ¥
  âœ‚ï¸ êµì°¨ì  ë°œê²¬: ì„ ë¶„ 0-1
  âœ‚ï¸ êµì°¨ì  ë°œê²¬: ì„ ë¶„ 2-3
  ğŸ“ êµì°¨ì : 2ê°œ ë°œê²¬
âœ‚ï¸ 2D ë¶„í•  ê²°ê³¼: pos=6ê°œ, neg=6ê°œ
âœ… ì™¼ìª½ ì¡°ê° ìƒì„± ì™„ë£Œ
âœ… ì˜¤ë¥¸ìª½ ì¡°ê° ìƒì„± ì™„ë£Œ
```

#### ì ˆë‹¨ ì‹¤íŒ¨ (ë³µêµ¬)
```
âœ‚ï¸ 2D ë¶„í•  ê²°ê³¼: pos=2ê°œ, neg=1ê°œ
âš ï¸ ë¶„í•  ì‹¤íŒ¨: ì •ì  ë¶€ì¡±
âš ï¸ ì›ë˜ ë©”ì‰¬ ë³µêµ¬ ì¤‘...
```

#### ë¬¼ë¦¬ ë°”ë”” ì‹¤íŒ¨
```
âš ï¸ fromVertices ì‹¤íŒ¨, BoundingBoxë¡œ ê·¼ì‚¬
ğŸ“ ì •ì  ì²˜ë¦¬: 100 â†’ 30ê°œ
```

---

## ì„±ëŠ¥ ìµœì í™”

### 1. ì •ì  ê°„ì†Œí™”
- ë³µì¡í•œ ë„í˜• (100+ ì •ì ) â†’ 30ê°œ
- Matter.js ê³„ì‚°ëŸ‰ ê°ì†Œ

### 2. ë©”ëª¨ë¦¬ ê´€ë¦¬
```javascript
// ë©”ì‰¬ ì œê±° ì‹œ
geometry.dispose();
material.dispose();
Matter.World.remove(world, body);
```

### 3. ë¬¼ë¦¬ ì—…ë°ì´íŠ¸
```javascript
// 60 FPS ê³ ì •
Matter.Engine.update(engine, 1000 / 60);
```

---

## ì‚¬ìš© ì˜ˆì‹œ

### ì‚¬ê°í˜• ì ˆë‹¨
```
ì…ë ¥: ì‚¬ê°í˜• (4ê°œ ì •ì ) + ìˆ˜í‰ ì ˆë‹¨ì„ 
ì¶œë ¥: ì‚¬ê°í˜• 2ê°œ (ê° 4ê°œ ì •ì )
```

### ì› ì ˆë‹¨
```
ì…ë ¥: ì› (32ê°œ ì •ì ) + ìˆ˜ì§ ì ˆë‹¨ì„ 
ì²˜ë¦¬: 32 â†’ 12ê°œë¡œ ê°„ì†Œí™”
ì¶œë ¥: ë°˜ì› 2ê°œ (ê° 8ê°œ ì •ì )
```

### ë‚˜ë­‡ì ì ˆë‹¨
```
ì…ë ¥: ë‚˜ë­‡ì (100+ ì •ì ) + ëŒ€ê°ì„ 
ì²˜ë¦¬: 100 â†’ 30ê°œë¡œ ê°„ì†Œí™”
ì¶œë ¥: ë³µì¡í•œ ì¡°ê° 2ê°œ (ê° 16~20ê°œ ì •ì )
```

---

## ë§ˆë¬´ë¦¬

### í•µì‹¬ ê°œë…
1. **2D ì „ìš©**: Matter.js + OrthographicCamera
2. **ì¢Œí‘œ ë³€í™˜**: Yì¶• ë°˜ì „ ì£¼ì˜
3. **ì ì‘í˜• ê°„ì†Œí™”**: ë„í˜• ë³µì¡ë„ì— ë”°ë¼ ìë™ ì¡°ì •
4. **ìˆœí™˜ ì²˜ë¦¬**: ë‹«íŒ ë„í˜•ì˜ ë§ˆì§€ë§‰ ì„ ë¶„ ì²˜ë¦¬
5. **ì•ˆì „ ë³µêµ¬**: ì‹¤íŒ¨ ì‹œ ì›ë³¸ ë©”ì‰¬ ìœ ì§€

### í™•ì¥ ê°€ëŠ¥ì„±
- ë‹¤ì–‘í•œ ì ˆë‹¨ ë°©ì‹ (ê³¡ì„ , ë³µìˆ˜ ì„ ë¶„)
- 3D ì ˆë‹¨ (ExtrudeGeometry)
- ì‹¤ì‹œê°„ ë‹¤ì¤‘ ì ˆë‹¨
- ë©”ì‰¬ ë³‘í•© ê¸°ëŠ¥

